<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ToDo App â€” contiva.cloud</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; color: #333; min-height: 100vh; display: flex; justify-content: center; padding: 2rem 1rem; }
    .container { width: 100%; max-width: 560px; }
    h1 { font-size: 1.5rem; margin-bottom: 1.5rem; }
    h1 span { color: #888; font-weight: 400; }
    .add-form { display: flex; gap: .5rem; margin-bottom: 1.5rem; }
    .add-form input[type="text"] { flex: 1; padding: .6rem .8rem; border: 1px solid #ddd; border-radius: 6px; font-size: .95rem; }
    .add-form input[type="text"]:focus { outline: none; border-color: #0070f3; }
    .add-form button { padding: .6rem 1.2rem; background: #0070f3; color: #fff; border: none; border-radius: 6px; font-size: .95rem; cursor: pointer; }
    .add-form button:hover { background: #005bb5; }
    .todo-list { list-style: none; }
    .todo-item { display: flex; align-items: center; gap: .75rem; padding: .75rem 1rem; background: #fff; border-radius: 6px; margin-bottom: .5rem; }
    .todo-item.done .todo-title { text-decoration: line-through; color: #999; }
    .todo-title { flex: 1; font-size: .95rem; }
    .btn { background: none; border: 1px solid #ddd; border-radius: 4px; padding: .3rem .6rem; cursor: pointer; font-size: .8rem; color: #555; }
    .btn:hover { background: #f0f0f0; }
    .btn-delete:hover { background: #fee; border-color: #e88; color: #c33; }
    .empty { text-align: center; color: #999; padding: 2rem; }
    footer { text-align: center; margin-top: 2rem; font-size: .8rem; color: #aaa; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ToDo <span>contiva.cloud</span></h1>

    <form class="add-form" method="POST" action="/todos">
      <input type="text" name="title" placeholder="Neue Aufgabe..." autofocus>
      <button type="submit">Hinzufuegen</button>
    </form>

    <% if (todos.length === 0) { %>
      <p class="empty">Keine Aufgaben vorhanden.</p>
    <% } else { %>
      <ul class="todo-list">
        <% todos.forEach(todo => { %>
          <li class="todo-item<%= todo.done ? ' done' : '' %>">
            <form method="POST" action="/todos/<%= todo.id %>/toggle" style="display:inline">
              <button class="btn" type="submit"><%= todo.done ? '&#10003;' : '&#9675;' %></button>
            </form>
            <span class="todo-title"><%= todo.title %></span>
            <form method="POST" action="/todos/<%= todo.id %>/delete" style="display:inline">
              <button class="btn btn-delete" type="submit">&#10005;</button>
            </form>
          </li>
        <% }) %>
      </ul>
    <% } %>

    <footer>Deployed via ArgoCD on Kubernetes</footer>
  </div>
</body>
</html>
